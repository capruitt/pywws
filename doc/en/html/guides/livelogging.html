

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>How to set up ‘live’ logging with pywws &mdash; pywws 15.05.0.dev1300 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/pywws_logo.ico"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="copyright" title="Copyright" href="../copyright.html"/>
    <link rel="top" title="pywws 15.05.0.dev1300 documentation" href="../index.html"/>
        <link rel="up" title="User guides" href="index.html"/>
        <link rel="next" title="How to integrate pywws with various weather services" href="integration.html"/>
        <link rel="prev" title="How to set up ‘hourly’ logging with pywws" href="hourlylogging.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        

        
          <a href="../index.html" class="icon icon-home"> pywws
        

        
          
          <img src="../_static/pywws_logo.png" class="logo" />
        
        </a>

        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../essentials/LICENCE.html">Licence</a></li>
<li class="toctree-l1"><a class="reference internal" href="../copyright.html">pywws Contributors</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../copyright.html#contributing-to-pywws">Contributing to pywws</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../copyright.html#developer-certificate-of-origin">Developer Certificate of Origin</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../essentials/dependencies.html">Dependencies</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../essentials/dependencies.html#essential">Essential</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../essentials/dependencies.html#usb-library">USB library</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../essentials/dependencies.html#mac-os-x">Mac OS X</a></li>
<li class="toctree-l4"><a class="reference internal" href="../essentials/dependencies.html#other-systems">Other systems</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../essentials/dependencies.html#flexible-timed-tasks">Flexible timed tasks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../essentials/dependencies.html#running-as-a-daemon">Running as a daemon</a></li>
<li class="toctree-l2"><a class="reference internal" href="../essentials/dependencies.html#graph-drawing">Graph drawing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../essentials/dependencies.html#secure-website-uploading-sftp">Secure website uploading (sftp)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../essentials/dependencies.html#twitter-updates">Twitter updates</a></li>
<li class="toctree-l2"><a class="reference internal" href="../essentials/dependencies.html#mqtt">MQTT</a></li>
<li class="toctree-l2"><a class="reference internal" href="../essentials/dependencies.html#to-create-new-language-translations">To create new language translations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../essentials/dependencies.html#to-compile-the-documentation">To &#8216;compile&#8217; the documentation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../essentials/CHANGELOG.html">Change log</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">User guides</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="getstarted.html">How to get started with pywws</a><ul>
<li class="toctree-l3"><a class="reference internal" href="getstarted.html#installation">Installation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="getstarted.html#easy-installation">Easy installation</a></li>
<li class="toctree-l4"><a class="reference internal" href="getstarted.html#download-and-extract">Download and extract</a></li>
<li class="toctree-l4"><a class="reference internal" href="getstarted.html#clone-the-repository">Clone the repository</a></li>
<li class="toctree-l4"><a class="reference internal" href="getstarted.html#install-scripts">Install scripts</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="getstarted.html#compile-documentation-optional">Compile documentation (optional)</a></li>
<li class="toctree-l3"><a class="reference internal" href="getstarted.html#test-the-weather-station-connection">Test the weather station connection</a></li>
<li class="toctree-l3"><a class="reference internal" href="getstarted.html#set-up-your-weather-station">Set up your weather station</a></li>
<li class="toctree-l3"><a class="reference internal" href="getstarted.html#set-the-weather-station-logging-interval">Set the weather station logging interval</a></li>
<li class="toctree-l3"><a class="reference internal" href="getstarted.html#log-your-weather-station-data">Log your weather station data</a></li>
<li class="toctree-l3"><a class="reference internal" href="getstarted.html#convert-old-easyweather-data-optional">Convert old EasyWeather data (optional)</a></li>
<li class="toctree-l3"><a class="reference internal" href="getstarted.html#set-some-configuration-options">Set some configuration options</a></li>
<li class="toctree-l3"><a class="reference internal" href="getstarted.html#process-the-raw-data">Process the raw data</a></li>
<li class="toctree-l3"><a class="reference internal" href="getstarted.html#read-the-documentation">Read the documentation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="hourlylogging.html">How to set up &#8216;hourly&#8217; logging with pywws</a><ul>
<li class="toctree-l3"><a class="reference internal" href="hourlylogging.html#introduction">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="hourlylogging.html#getting-started">Getting started</a></li>
<li class="toctree-l3"><a class="reference internal" href="hourlylogging.html#configuring-file-locations">Configuring file locations</a></li>
<li class="toctree-l3"><a class="reference internal" href="hourlylogging.html#configuring-periodic-tasks">Configuring periodic tasks</a></li>
<li class="toctree-l3"><a class="reference internal" href="hourlylogging.html#run-as-a-cron-job">Run as a cron job</a></li>
</ul>
</li>
<li class="toctree-l2 current"><a class="current reference internal" href="">How to set up &#8216;live&#8217; logging with pywws</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="#getting-started">Getting started</a></li>
<li class="toctree-l3"><a class="reference internal" href="#configuring-file-locations">Configuring file locations</a></li>
<li class="toctree-l3"><a class="reference internal" href="#configuring-periodic-tasks">Configuring periodic tasks</a></li>
<li class="toctree-l3"><a class="reference internal" href="#asynchronous-uploads">Asynchronous uploads</a></li>
<li class="toctree-l3"><a class="reference internal" href="#run-in-the-background">Run in the background</a></li>
<li class="toctree-l3"><a class="reference internal" href="#automatic-restarting">Automatic restarting</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="integration.html">How to integrate pywws with various weather services</a><ul>
<li class="toctree-l3"><a class="reference internal" href="integration.html#yowindow">YoWindow</a></li>
<li class="toctree-l3"><a class="reference internal" href="integration.html#twitter">Twitter</a></li>
<li class="toctree-l3"><a class="reference internal" href="integration.html#other-services">Other &#8220;services&#8221;</a><ul>
<li class="toctree-l4"><a class="reference internal" href="integration.html#citizen-weather-observer-program">Citizen Weather Observer Program</a></li>
<li class="toctree-l4"><a class="reference internal" href="integration.html#mqtt">MQTT</a></li>
<li class="toctree-l4"><a class="reference internal" href="integration.html#uk-met-office">UK Met Office</a></li>
<li class="toctree-l4"><a class="reference internal" href="integration.html#open-weather-map">Open Weather Map</a></li>
<li class="toctree-l4"><a class="reference internal" href="integration.html#pws-weather">PWS Weather</a></li>
<li class="toctree-l4"><a class="reference internal" href="integration.html#temperatur-nu">temperatur.nu</a></li>
<li class="toctree-l4"><a class="reference internal" href="integration.html#weather-underground">Weather Underground</a></li>
<li class="toctree-l4"><a class="reference internal" href="integration.html#weather-underground-rapidfire-updates">Weather Underground &#8220;RapidFire&#8221; updates</a></li>
<li class="toctree-l4"><a class="reference internal" href="integration.html#wetter-com">wetter.com</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="twitter.html">How to configure pywws to post messages to Twitter</a><ul>
<li class="toctree-l3"><a class="reference internal" href="twitter.html#install-dependencies">Install dependencies</a></li>
<li class="toctree-l3"><a class="reference internal" href="twitter.html#create-a-twitter-account">Create a Twitter account</a></li>
<li class="toctree-l3"><a class="reference internal" href="twitter.html#authorise-pywws-to-post-to-your-twitter-account">Authorise pywws to post to your Twitter account</a></li>
<li class="toctree-l3"><a class="reference internal" href="twitter.html#add-location-data-optional">Add location data (optional)</a></li>
<li class="toctree-l3"><a class="reference internal" href="twitter.html#create-a-template">Create a template</a></li>
<li class="toctree-l3"><a class="reference internal" href="twitter.html#post-your-first-weather-tweet">Post your first weather Tweet</a></li>
<li class="toctree-l3"><a class="reference internal" href="twitter.html#add-twitter-updates-to-your-hourly-tasks">Add Twitter updates to your hourly tasks</a></li>
<li class="toctree-l3"><a class="reference internal" href="twitter.html#include-an-image-in-your-tweet">Include an image in your tweet</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="language.html">How to use pywws in another language</a><ul>
<li class="toctree-l3"><a class="reference internal" href="language.html#introduction">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="language.html#using-an-existing-language-file">Using an existing language file</a></li>
<li class="toctree-l3"><a class="reference internal" href="language.html#dependencies">Dependencies</a></li>
<li class="toctree-l3"><a class="reference internal" href="language.html#translating-the-easy-way-the-transifex-web-site">Translating the easy way - the Transifex web site</a></li>
<li class="toctree-l3"><a class="reference internal" href="language.html#translating-the-hard-way-using-local-files">Translating the hard way - using local files</a><ul>
<li class="toctree-l4"><a class="reference internal" href="language.html#extract-source-strings">Extract source strings</a></li>
<li class="toctree-l4"><a class="reference internal" href="language.html#create-language-files">Create language files</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="language.html#test-the-pywws-translation">Test the pywws translation</a></li>
<li class="toctree-l3"><a class="reference internal" href="language.html#notes-for-translators">Notes for translators</a></li>
<li class="toctree-l3"><a class="reference internal" href="language.html#send-jim-the-translation">Send Jim the translation</a></li>
<li class="toctree-l3"><a class="reference internal" href="language.html#translating-the-documentation">Translating the documentation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="language.html#id1">Extract source strings</a></li>
<li class="toctree-l4"><a class="reference internal" href="language.html#id2">Create language files</a></li>
<li class="toctree-l4"><a class="reference internal" href="language.html#viewing-your-translated-documentation">Viewing your translated documentation</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="weather_ini.html">weather.ini - configuration file format</a><ul>
<li class="toctree-l3"><a class="reference internal" href="weather_ini.html#config-miscellaneous-system-configuration">config: miscellaneous system configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="weather_ini.html#paths-directories-in-which-templates-etc-are-stored">paths: directories in which templates etc. are stored</a></li>
<li class="toctree-l3"><a class="reference internal" href="weather_ini.html#live-tasks-to-be-done-every-48-seconds">live: tasks to be done every 48 seconds</a></li>
<li class="toctree-l3"><a class="reference internal" href="weather_ini.html#logged-tasks-to-be-done-every-time-the-station-logs-a-data-record">logged: tasks to be done every time the station logs a data record</a></li>
<li class="toctree-l3"><a class="reference internal" href="weather_ini.html#cron-tasks-to-be-done-at-a-particular-time-or-date">cron: tasks to be done at a particular time or date</a></li>
<li class="toctree-l3"><a class="reference internal" href="weather_ini.html#hourly-tasks-to-be-done-every-hour">hourly: tasks to be done every hour</a></li>
<li class="toctree-l3"><a class="reference internal" href="weather_ini.html#hourly-tasks-to-be-done-every-12-hours">12 hourly: tasks to be done every 12 hours</a></li>
<li class="toctree-l3"><a class="reference internal" href="weather_ini.html#daily-tasks-to-be-done-every-24-hours">daily: tasks to be done every 24 hours</a></li>
<li class="toctree-l3"><a class="reference internal" href="weather_ini.html#ftp-configuration-of-uploading-to-a-website">ftp: configuration of uploading to a website</a></li>
<li class="toctree-l3"><a class="reference internal" href="weather_ini.html#twitter-configuration-of-posting-to-twitter">twitter: configuration of posting to Twitter</a></li>
<li class="toctree-l3"><a class="reference internal" href="weather_ini.html#underground-metoffice-temperaturnu-etc-configuration-of-posting-to-services">underground, metoffice, temperaturnu etc: configuration of posting to &#8216;services&#8217;</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="weather_ini.html#status-ini-status-file-format">status.ini - status file format</a><ul>
<li class="toctree-l3"><a class="reference internal" href="weather_ini.html#fixed-values-copied-from-the-weather-station-s-fixed-block">fixed: values copied from the weather station&#8217;s &#8220;fixed block&#8221;</a></li>
<li class="toctree-l3"><a class="reference internal" href="weather_ini.html#clock-synchronisation-information">clock: synchronisation information</a></li>
<li class="toctree-l3"><a class="reference internal" href="weather_ini.html#last-update-date-and-time-of-most-recent-task-completions">last update: date and time of most recent task completions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="humidex.html">Humidity Index (Humidex)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="humidex.html#background">Background</a></li>
<li class="toctree-l3"><a class="reference internal" href="humidex.html#introduction">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="humidex.html#assumptions">Assumptions</a></li>
<li class="toctree-l3"><a class="reference internal" href="humidex.html#important-references">Important References</a></li>
<li class="toctree-l3"><a class="reference internal" href="humidex.html#how-to-use">How to use</a></li>
<li class="toctree-l3"><a class="reference internal" href="humidex.html#not-running-the-latest-update">Not running the latest update?</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../api_index.html">Python modules</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../api_index.html#set-up-and-configure-pywws">Set up and configure pywws</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api/pywws.TestWeatherStation.html">pywws.TestWeatherStation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/pywws.SetWeatherStation.html">pywws.SetWeatherStation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/pywws.version.html">pywws.version</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/pywws.Reprocess.html">pywws.Reprocess</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/pywws.TwitterAuth.html">pywws.TwitterAuth</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/pywws.USBQualityTest.html">pywws.USBQualityTest</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/pywws.EWtoPy.html">pywws.EWtoPy</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/pywws.EWtoPy.html#introduction">Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/pywws.EWtoPy.html#detailed-api">Detailed API</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../api_index.html#get-data-and-process-it">Get data and process it</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api/pywws.Hourly.html">pywws.Hourly</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/pywws.LiveLog.html">pywws.LiveLog</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/pywws.livelogdaemon.html">pywws.livelogdaemon</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../api_index.html#internal-modules">&#8220;Internal&#8221; modules</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api/pywws.Tasks.html">pywws.Tasks</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/pywws.LogData.html">pywws.LogData</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/pywws.LogData.html#detailed-api">Detailed API</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api/pywws.Process.html">pywws.Process</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/pywws.calib.html">pywws.calib</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/pywws.calib.html#calibrate-raw-weather-station-data">Calibrate raw weather station data</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api/pywws.Plot.html">pywws.Plot</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/pywws.Plot.html#introduction">Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/pywws.Plot.html#detailed-api">Detailed API</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api/pywws.WindRose.html">pywws.WindRose</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/pywws.WindRose.html#introduction">Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/pywws.WindRose.html#xml-graph-file-syntax">XML graph file syntax</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/pywws.WindRose.html#detailed-api">Detailed API</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api/pywws.Template.html">pywws.Template</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/pywws.Template.html#introduction">Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/pywws.Template.html#processing-instructions">Processing instructions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/pywws.Template.html#example">Example</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/pywws.Template.html#detailed-api">Detailed API</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api/pywws.Forecast.html">pywws.Forecast</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/pywws.ZambrettiCore.html">pywws.ZambrettiCore</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/pywws.Upload.html">pywws.Upload</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/pywws.Upload.html#introduction">Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/pywws.Upload.html#detailed-api">Detailed API</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api/pywws.ToTwitter.html">pywws.ToTwitter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/pywws.toservice.html">pywws.toservice</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/pywws.toservice.html#introduction">Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/pywws.toservice.html#configuration">Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/pywws.toservice.html#upload-old-data">Upload old data</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/pywws.toservice.html#add-service-s-upload-to-regular-tasks">Add service(s) upload to regular tasks</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/pywws.toservice.html#using-a-different-template">Using a different template</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/pywws.toservice.html#api">API</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api/pywws.YoWindow.html">pywws.YoWindow</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/pywws.WeatherStation.html">pywws.WeatherStation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/pywws.WeatherStation.html#introduction">Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/pywws.WeatherStation.html#detailed-api">Detailed API</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api/pywws.device_libusb1.html">pywws.device_libusb1</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/pywws.device_libusb1.html#introduction">Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/pywws.device_libusb1.html#testing">Testing</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/pywws.device_libusb1.html#api">API</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api/pywws.device_pyusb1.html">pywws.device_pyusb1</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/pywws.device_pyusb1.html#introduction">Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/pywws.device_pyusb1.html#testing">Testing</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/pywws.device_pyusb1.html#api">API</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api/pywws.device_pyusb.html">pywws.device_pyusb</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/pywws.device_pyusb.html#introduction">Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/pywws.device_pyusb.html#testing">Testing</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/pywws.device_pyusb.html#api">API</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api/pywws.device_ctypes_hidapi.html">pywws.device_ctypes_hidapi</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/pywws.device_ctypes_hidapi.html#introduction">Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/pywws.device_ctypes_hidapi.html#testing">Testing</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/pywws.device_ctypes_hidapi.html#api">API</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api/pywws.device_cython_hidapi.html">pywws.device_cython_hidapi</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/pywws.device_cython_hidapi.html#introduction">Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/pywws.device_cython_hidapi.html#testing">Testing</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/pywws.device_cython_hidapi.html#api">API</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api/pywws.DataStore.html">pywws.DataStore</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/pywws.DataStore.html#introduction">Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/pywws.DataStore.html#detailed-api">Detailed API</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api/pywws.TimeZone.html">pywws.TimeZone</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/pywws.TimeZone.html#introduction">Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/pywws.TimeZone.html#detailed-api">Detailed API</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api/pywws.Localisation.html">pywws.Localisation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/pywws.Localisation.html#introduction">Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/pywws.Localisation.html#using-a-different-language">Using a different language</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/pywws.Localisation.html#creating-a-new-translation">Creating a new translation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api/pywws.conversions.html">pywws.conversions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/pywws.Logger.html">pywws.Logger</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/pywws.constants.html">pywws.constants</a></li>
</ul>
</li>
</ul>
</li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">pywws</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="index.html">User guides</a> &raquo;</li>
      
    <li>How to set up &#8216;live&#8217; logging with pywws</li>
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">pywws documentation is now located at <a class="reference external" href="http://pywws.readthedocs.org/">http://pywws.readthedocs.org/</a>.
This copy is no longer being updated and may be out of date.</p>
</div>
<div class="section" id="how-to-set-up-live-logging-with-pywws">
<h1>How to set up &#8216;live&#8217; logging with pywws<a class="headerlink" href="#how-to-set-up-live-logging-with-pywws" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>There are two quite different modes of operation with pywws.
Traditionally <a class="reference internal" href="../api/pywws.Hourly.html#module-pywws.Hourly" title="pywws.Hourly"><code class="xref py py-mod docutils literal"><span class="pre">pywws.Hourly</span></code></a> would be run at regular intervals (usually an hour) from cron.
This is suitable for fairly static websites, but more frequent updates can be useful for sites such as Weather Underground (<a class="reference external" href="http://www.wunderground.com/">http://www.wunderground.com/</a>).
The newer <a class="reference internal" href="../api/pywws.LiveLog.html#module-pywws.LiveLog" title="pywws.LiveLog"><code class="xref py py-mod docutils literal"><span class="pre">pywws.LiveLog</span></code></a> program runs continuously and can upload data every 48 seconds.</p>
</div>
<div class="section" id="getting-started">
<h2>Getting started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h2>
<p>First of all, you need to install pywws and make sure it can get data from your weather station.
See <a class="reference internal" href="getstarted.html"><em>How to get started with pywws</em></a> for details.</p>
<p>If you have previously been using <a class="reference internal" href="../api/pywws.Hourly.html#module-pywws.Hourly" title="pywws.Hourly"><code class="xref py py-mod docutils literal"><span class="pre">pywws.Hourly</span></code></a> then disable your &#8216;cron&#8217; job (or whatever else you use to run it) so it no longer runs.
You should not run <a class="reference internal" href="../api/pywws.Hourly.html#module-pywws.Hourly" title="pywws.Hourly"><code class="xref py py-mod docutils literal"><span class="pre">pywws.Hourly</span></code></a> and <a class="reference internal" href="../api/pywws.LiveLog.html#module-pywws.LiveLog" title="pywws.LiveLog"><code class="xref py py-mod docutils literal"><span class="pre">pywws.LiveLog</span></code></a> at the same time.</p>
<p>Try running <a class="reference internal" href="../api/pywws.LiveLog.html#module-pywws.LiveLog" title="pywws.LiveLog"><code class="xref py py-mod docutils literal"><span class="pre">pywws.LiveLog</span></code></a> from the command line, with a high level of verbosity so you can see what&#8217;s happening.
Use the <code class="docutils literal"><span class="pre">pywws-livelog</span></code> command to run <a class="reference internal" href="../api/pywws.LiveLog.html#module-pywws.LiveLog" title="pywws.LiveLog"><code class="xref py py-mod docutils literal"><span class="pre">pywws.LiveLog</span></code></a>:</p>
<div class="highlight-python"><div class="highlight"><pre>pywws-livelog -vvv ~/weather/data
</pre></div>
</div>
<p>Within five minutes (assuming you have set a 5 minute logging interval) you should see a &#8216;live_data new ptr&#8217; message, followed by fetching any new data from the weather station and processing it.
Let <a class="reference internal" href="../api/pywws.LiveLog.html#module-pywws.LiveLog" title="pywws.LiveLog"><code class="xref py py-mod docutils literal"><span class="pre">pywws.LiveLog</span></code></a> run for a minute or two longer, then kill the process by typing &#8216;&lt;Ctrl&gt;C&#8217;.</p>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 14.04.dev1194: </span>the <code class="docutils literal"><span class="pre">pywws-livelog</span></code> command replaced <code class="docutils literal"><span class="pre">scripts/pywws-livelog.py</span></code>.</p>
</div>
</div>
<div class="section" id="configuring-file-locations">
<h2>Configuring file locations<a class="headerlink" href="#configuring-file-locations" title="Permalink to this headline">¶</a></h2>
<p>Open your weather.ini file with a text editor.
You should have a <code class="docutils literal"><span class="pre">[paths]</span></code> section similar to the following (where <code class="docutils literal"><span class="pre">xxx</span></code> is your user name):</p>
<div class="highlight-python"><div class="highlight"><pre>[paths]
work = /tmp/weather
templates = /home/xxx/weather/templates/
graph_templates = /home/xxx/weather/graph_templates/
local_files = /home/xxx/weather/results/
</pre></div>
</div>
<p>Edit these to suit your installation and preferences.
<code class="docutils literal"><span class="pre">work</span></code> is a temporary directory used to store intermediate files, <code class="docutils literal"><span class="pre">templates</span></code> is the directory where you keep your text template files, <code class="docutils literal"><span class="pre">graph_templates</span></code> is the directory where you keep your graph template files and <code class="docutils literal"><span class="pre">local_files</span></code> is a directory where template output that is not uploaded to your web site is put.
Don&#8217;t use the pywws example directories for your templates, as they will get over-written when you upgrade pywws.</p>
<p>Copy your text and graph templates to the appropriate directories.
You may find some of the examples provided with pywws useful to get started.
The <code class="docutils literal"><span class="pre">pywws-version</span> <span class="pre">-v</span></code> command should show you where the examples are on your computer.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 14.04.dev1194: </span>the <code class="docutils literal"><span class="pre">pywws-version</span></code> command.</p>
</div>
</div>
<div class="section" id="configuring-periodic-tasks">
<h2>Configuring periodic tasks<a class="headerlink" href="#configuring-periodic-tasks" title="Permalink to this headline">¶</a></h2>
<p>In weather.ini you should have a <code class="docutils literal"><span class="pre">[live]</span></code> section similar to the following:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[</span><span class="n">live</span><span class="p">]</span>
<span class="n">services</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">plot</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">text</span> <span class="o">=</span> <span class="p">[]</span>
</pre></div>
</div>
<p>This section specifies what pywws should do every time it gets a new reading from the weather station, i.e. every 48 seconds.
The <code class="docutils literal"><span class="pre">services</span></code> entry is a list of online weather services to upload data to, e.g. <code class="docutils literal"><span class="pre">['underground_rf']</span></code>.
The <code class="docutils literal"><span class="pre">plot</span></code> and <code class="docutils literal"><span class="pre">text</span></code> entries are lists of template files for plots and text files to be processed and, optionally, uploaded to your web site.
You should probably leave all of these blank except for <code class="docutils literal"><span class="pre">services</span></code>.</p>
<p>If you use YoWindow (<a class="reference external" href="http://yowindow.com/">http://yowindow.com/</a>) you can add an entry to the <code class="docutils literal"><span class="pre">[live]</span></code> section to specify your YoWindow file, e.g.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[</span><span class="n">live</span><span class="p">]</span>
<span class="n">services</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;underground_rf&#39;</span><span class="p">]</span>
<span class="n">text</span> <span class="o">=</span> <span class="p">[(</span><span class="s">&#39;yowindow.xml&#39;</span><span class="p">,</span> <span class="s">&#39;L&#39;</span><span class="p">)]</span>
<span class="o">...</span>
</pre></div>
</div>
<p>Note the use of the <code class="docutils literal"><span class="pre">'L'</span></code> flag &#8211; this tells pywws to copy the template result to your &#8220;local files&#8221; directory instead of uploading it to your ftp site.</p>
<p>If you don&#8217;t already have them, create four more sections in your weather.ini file: <code class="docutils literal"><span class="pre">[logged]</span></code>, <code class="docutils literal"><span class="pre">[hourly]</span></code>, <code class="docutils literal"><span class="pre">[12</span> <span class="pre">hourly]</span></code> and <code class="docutils literal"><span class="pre">[daily]</span></code>.
These sections should have similar entries to the <code class="docutils literal"><span class="pre">[live]</span></code> section, and specify what to do every time data is logged (5 to 30 minutes, depending on your logging interval), every hour, twice daily and once per day.
Add the names of your template files to the appropriate entries, for example:</p>
<div class="highlight-python"><div class="highlight"><pre>[logged]
services = [&#39;underground&#39;, &#39;metoffice&#39;]
plot = []
text = []

[hourly]
services = []
plot = [&#39;7days.png.xml&#39;, &#39;24hrs.png.xml&#39;, &#39;rose_24hrs.png.xml&#39;]
text = [(&#39;tweet.txt&#39;, &#39;T&#39;), &#39;24hrs.txt&#39;, &#39;6hrs.txt&#39;, &#39;7days.txt&#39;]

[12 hourly]
services = []
plot = []
text = []

[daily]
services = []
plot = [&#39;28days.png.xml&#39;]
text = [(&#39;forecast.txt&#39;, &#39;T&#39;), &#39;allmonths.txt&#39;]
</pre></div>
</div>
<p>Note the use of the <code class="docutils literal"><span class="pre">'T'</span></code> flag &#8211; this tells pywws to send the template result to Twitter instead of uploading it to your ftp site.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 14.05.dev1211: </span><code class="docutils literal"><span class="pre">[cron</span> <span class="pre">name]</span></code> sections.
If you need more flexibility in when tasks are done you can use <code class="docutils literal"><span class="pre">[cron</span> <span class="pre">name]</span></code> sections.
See <a class="reference internal" href="weather_ini.html"><em>weather.ini - configuration file format</em></a> for more detail.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 13.06_r1015: </span>added the <code class="docutils literal"><span class="pre">'T'</span></code> flag.
Previously Twitter templates were listed separately in <code class="docutils literal"><span class="pre">twitter</span></code> entries in the <code class="docutils literal"><span class="pre">[hourly]</span></code> and other sections.
The older syntax still works, but is deprecated.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 13.05_r1013: </span>added a <code class="docutils literal"><span class="pre">'yowindow.xml'</span></code> template.
Previously yowindow files were generated by a separate module, invoked by a <code class="docutils literal"><span class="pre">yowindow</span></code> entry in the <code class="docutils literal"><span class="pre">[live]</span></code> section.
This older syntax still works, but is deprecated.</p>
</div>
</div>
<div class="section" id="asynchronous-uploads">
<h2>Asynchronous uploads<a class="headerlink" href="#asynchronous-uploads" title="Permalink to this headline">¶</a></h2>
<div class="versionadded">
<p><span class="versionmodified">New in version 13.09_r1057.</span></p>
</div>
<p>Uploading data to web sites or &#8216;services&#8217; can sometimes take a long time, particularly if a site has gone off line and the upload times out.
In normal operation pywws waits until all uploads have been processed before fetching any more data from the weather station.
This can lead to data sometimes being missed.</p>
<p>The <code class="docutils literal"><span class="pre">asynchronous</span></code> item in the <code class="docutils literal"><span class="pre">[config]</span></code> section of weather.ini can be set to <code class="docutils literal"><span class="pre">True</span></code> to tell <a class="reference internal" href="../api/pywws.LiveLog.html#module-pywws.LiveLog" title="pywws.LiveLog"><code class="xref py py-mod docutils literal"><span class="pre">pywws.LiveLog</span></code></a> to do these uploads in a separate thread.</p>
</div>
<div class="section" id="run-in-the-background">
<h2>Run in the background<a class="headerlink" href="#run-in-the-background" title="Permalink to this headline">¶</a></h2>
<div class="versionadded">
<p><span class="versionmodified">New in version 13.12.dev1118.</span></p>
</div>
<p>In order to have <a class="reference internal" href="../api/pywws.LiveLog.html#module-pywws.LiveLog" title="pywws.LiveLog"><code class="xref py py-mod docutils literal"><span class="pre">pywws.LiveLog</span></code></a> carry on running after you finish using your computer it needs to be run as a &#8220;background job&#8221;.
On most Linux / UNIX systems you can do this by putting an ampersand (&#8216;&amp;&#8217;) at the end of the command line.
Running a job in the background like this doesn&#8217;t always work as expected: the job may suspend when you log out.
It&#8217;s much better to run as a proper UNIX &#8216;daemon&#8217; process.</p>
<p>The <a class="reference internal" href="../api/pywws.livelogdaemon.html#module-pywws.livelogdaemon" title="pywws.livelogdaemon"><code class="xref py py-mod docutils literal"><span class="pre">pywws.livelogdaemon</span></code></a> program does this, if you have the <a class="reference external" href="https://pypi.python.org/pypi/python-daemon/">python-daemon</a> library installed:</p>
<div class="highlight-python"><div class="highlight"><pre>pywws-livelog-daemon -v ~/weather/data ~/weather/data/pywws.log start
</pre></div>
</div>
<p>Note that the log file is a required parameter, not an option.</p>
</div>
<div class="section" id="automatic-restarting">
<h2>Automatic restarting<a class="headerlink" href="#automatic-restarting" title="Permalink to this headline">¶</a></h2>
<p>There are various ways of configuring a Linux system to start a program when the machine boots up.
Typically these involve putting a file in <code class="docutils literal"><span class="pre">/etc/init.d/</span></code>, which requires root privileges.
A slightly harder problem is ensuring a program restarts if it crashes.
My solution to both problems is to run the following script from cron, several times an hour.</p>
<div class="highlight-python"><div class="highlight"><pre>#!/bin/sh

export PATH=$PATH:/usr/local/bin

# exit if NTP hasn&#39;t set computer clock
[ `ntpdc -c sysinfo | awk &#39;/stratum:/ {print $2}&#39;` -ge 10 ] &amp;&amp; exit

pidfile=/var/run/pywws.pid
datadir=/home/jim/weather/data
logfile=$datadir/live_logger.log

# exit if process is running
[ -f $pidfile ] &amp;&amp; kill -0 `cat $pidfile` &amp;&amp; exit

# email last few lines of the logfile to see why it died
if [ -f $logfile ]; then
  log=/tmp/log-weather
  tail -40 $logfile &gt;$log
  /home/jim/scripts/email-log.sh $log &quot;weather log&quot;
  rm $log
  fi

# restart process
pywws-livelog-daemon -v -p $pidfile $datadir $logfile start
</pre></div>
</div>
<p>The process id of the daemon is stored in <code class="docutils literal"><span class="pre">pidfile</span></code>.
If the process is running, the script does nothing.
If the process has crashed, it emails the last 40 lines of the log file to me (using a script that creates a message and passes it to sendmail) and then restarts <a class="reference internal" href="../api/pywws.livelogdaemon.html#module-pywws.livelogdaemon" title="pywws.livelogdaemon"><code class="xref py py-mod docutils literal"><span class="pre">pywws.livelogdaemon</span></code></a>.
You&#8217;ll need to edit this quite a lot to suit your file locations and so on, but it gives some idea of what to do.</p>
<hr class="docutils" />
<p>Comments or questions? Please subscribe to the pywws mailing list
<a class="reference external" href="http://groups.google.com/group/pywws">http://groups.google.com/group/pywws</a> and let us know.</p>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="integration.html" class="btn btn-neutral float-right" title="How to integrate pywws with various weather services" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="hourlylogging.html" class="btn btn-neutral" title="How to set up ‘hourly’ logging with pywws" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; <a href="../copyright.html">Copyright</a> 2008-15, pywws contributors.
    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'15.05.0.dev1300',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>